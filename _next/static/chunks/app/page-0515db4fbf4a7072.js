(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1512:(e,t,a)=>{Promise.resolve().then(a.bind(a,1109))},1109:(e,t,a)=>{"use strict";a.d(t,{default:()=>N});var s=a(5155),r=a(2115),n=a(3271),i=a(1190),l=a(7078),o=a(8283),d=a(5565),c=a(1290),u=a(1027),m=a(3463),g=a(9795);function f(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,g.QP)((0,m.$)(t))}let x=(0,u.F)("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),h=r.forwardRef((e,t)=>{let{className:a,variant:r,size:n,asChild:i=!1,...l}=e,o=i?c.DX:"button";return(0,s.jsx)(o,{className:f(x({variant:r,size:n,className:a})),ref:t,...l})});h.displayName="Button";let v=(0,u.F)("relative w-full rounded-lg border p-4 [&:has(svg)]:pl-11 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),p=r.forwardRef((e,t)=>{let{className:a,variant:r,...n}=e;return(0,s.jsx)("div",{ref:t,role:"alert",className:f(v({variant:r}),a),...n})});p.displayName="Alert";let b=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("h5",{ref:t,className:f("mb-1 font-medium leading-none tracking-tight",a),...r})});b.displayName="AlertTitle";let w=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:f("text-sm [&_p]:leading-relaxed",a),...r})});w.displayName="AlertDescription";let y=a(2818).env.NEXT_PUBLIC_API_URL||"https://web.cari1412.online",N=()=>{let[e,t]=(0,r.useState)(!1),[a,c]=(0,r.useState)(""),[u,m]=(0,r.useState)(null),{messages:g,input:f,handleInputChange:x,handleSubmit:v,isLoading:N}=(0,n.Y_)({api:"".concat(y,"/api/chat"),headers:{"Content-Type":"application/json",Origin:window.location.origin},onError:e=>{m({title:"Chat Error",message:e.message})}}),j=e=>{m({title:"Error",message:e.message}),setTimeout(()=>m(null),5e3)},k=async()=>{if(f){t(!0);try{let e=await fetch("".concat(y,"/api/generate-image"),{method:"POST",headers:{"Content-Type":"application/json",Origin:window.location.origin},body:JSON.stringify({prompt:f})});if(!e.ok)throw Error("Failed to generate image");let t=await e.json();c(t.imageUrl)}catch(e){j(e instanceof Error?e:Error("Failed to generate image"))}finally{t(!1)}}};return(0,s.jsxs)("div",{className:"flex flex-col w-full max-w-4xl mx-auto h-[calc(100vh-6rem)]",children:[(0,s.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50 rounded-lg",children:[g.map(e=>(0,s.jsxs)("div",{className:"flex flex-col p-4 rounded-lg ".concat("assistant"===e.role?"bg-white shadow-sm ml-4":"bg-blue-50 shadow-sm mr-4"),children:[(0,s.jsx)("span",{className:"text-sm font-medium mb-2 text-gray-600",children:"assistant"===e.role?"AI Assistant":"You"}),(0,s.jsx)("p",{className:"text-gray-800 leading-relaxed",children:e.content})]},e.id)),a&&(0,s.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm ml-4",children:[(0,s.jsx)("span",{className:"text-sm font-medium mb-2 text-gray-600 block",children:"Generated Image"}),(0,s.jsx)("div",{className:"mt-2 relative aspect-square w-full max-w-xl mx-auto",children:(0,s.jsx)(d.default,{src:a,alt:"AI Generated",fill:!0,className:"rounded-lg object-contain"})})]}),0===g.length&&(0,s.jsx)("div",{className:"flex items-center justify-center h-full text-gray-500",children:"Start a conversation or generate an image"})]}),u&&(0,s.jsxs)(p,{variant:"destructive",className:"m-4",onClick:()=>m(null),children:[(0,s.jsx)(b,{children:u.title}),(0,s.jsx)(w,{children:u.message})]}),(0,s.jsx)("div",{className:"p-4 bg-white border-t",children:(0,s.jsxs)("form",{onSubmit:v,className:"flex gap-2",children:[(0,s.jsx)("input",{value:f,onChange:x,placeholder:"Type a message or describe an image...",className:"flex-1 p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all",disabled:N||e}),(0,s.jsx)(h,{type:"button",onClick:k,disabled:N||e||!f,variant:"outline",size:"icon",className:"transition-all",children:e?(0,s.jsx)(i.A,{className:"h-5 w-5 animate-spin"}):(0,s.jsx)(l.A,{className:"h-5 w-5"})}),(0,s.jsx)(h,{type:"submit",disabled:N||e||!f,size:"icon",className:"transition-all",children:N?(0,s.jsx)(o.A,{className:"h-5 w-5 animate-spin"}):(0,s.jsx)(o.A,{className:"h-5 w-5"})})]})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[6,441,517,358],()=>t(1512)),_N_E=e.O()}]);