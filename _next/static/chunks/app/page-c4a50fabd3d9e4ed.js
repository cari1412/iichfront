(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1512:(e,t,a)=>{Promise.resolve().then(a.bind(a,1109))},1109:(e,t,a)=>{"use strict";a.d(t,{default:()=>j});var r=a(5155),s=a(2115),i=a(3271),n=a(1190),l=a(7078),o=a(8283),d=a(5565),c=a(1290),u=a(1027),m=a(3463),g=a(9795);function h(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,g.QP)((0,m.$)(t))}let f=(0,u.F)("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),p=s.forwardRef((e,t)=>{let{className:a,variant:s,size:i,asChild:n=!1,...l}=e,o=n?c.DX:"button";return(0,r.jsx)(o,{className:h(f({variant:s,size:i,className:a})),ref:t,...l})});p.displayName="Button";let v=(0,u.F)("relative w-full rounded-lg border p-4 [&:has(svg)]:pl-11 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),x=s.forwardRef((e,t)=>{let{className:a,variant:s,...i}=e;return(0,r.jsx)("div",{ref:t,role:"alert",className:h(v({variant:s}),a),...i})});x.displayName="Alert";let b=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("h5",{ref:t,className:h("mb-1 font-medium leading-none tracking-tight",a),...s})});b.displayName="AlertTitle";let y=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:h("text-sm [&_p]:leading-relaxed",a),...s})});y.displayName="AlertDescription";let w=a(2818).env.NEXT_PUBLIC_API_URL||"https://web.cari1412.online",j=()=>{let[e,t]=(0,s.useState)(!1),[a,c]=(0,s.useState)(""),[u,m]=(0,s.useState)(null),{messages:g,input:h,handleInputChange:f,handleSubmit:v,isLoading:j}=(0,i.Y_)({api:"".concat(w,"/api/chat"),headers:{"Content-Type":"application/json",Origin:window.location.origin},onError:e=>{m({title:"Chat Error",message:e.message})}}),N=e=>{m({title:"Error",message:e.message}),setTimeout(()=>m(null),5e3)},k=async()=>{if(h){t(!0);try{let e=await fetch("".concat(w,"/api/generate-image"),{method:"POST",headers:{"Content-Type":"application/json",Origin:window.location.origin},body:JSON.stringify({prompt:h})});if(!e.ok)throw Error("Failed to generate image");let t=await e.json();c(t.imageUrl)}catch(e){N(e instanceof Error?e:Error("Failed to generate image"))}finally{t(!1)}}};return(0,r.jsxs)("div",{className:"w-full h-[calc(100vh-8rem)] flex flex-col",children:[(0,r.jsxs)("div",{className:"flex-1 overflow-y-auto px-4 py-2 space-y-4",children:[g.map(e=>(0,r.jsxs)("div",{className:"p-3 rounded-lg ".concat("assistant"===e.role?"bg-blue-50":"bg-white"),children:[(0,r.jsxs)("p",{className:"text-sm font-semibold",children:["assistant"===e.role?"AI":"You",":"]}),(0,r.jsx)("p",{className:"text-gray-700",children:e.content})]},e.id)),a&&(0,r.jsx)("div",{className:"py-2",children:(0,r.jsx)(d.default,{src:a,alt:"Generated",width:512,height:512,className:"rounded-lg shadow-md max-w-full max-h-96 object-contain"})})]}),u&&(0,r.jsx)("div",{className:"px-4",children:(0,r.jsxs)(x,{variant:"destructive",className:"mb-2",onClick:()=>m(null),children:[(0,r.jsx)(b,{children:u.title}),(0,r.jsx)(y,{children:u.message})]})}),(0,r.jsx)("div",{className:"p-4 border-t",children:(0,r.jsxs)("form",{onSubmit:v,className:"flex gap-2",children:[(0,r.jsx)("input",{value:h,onChange:f,placeholder:"Type a message or image prompt...",className:"flex-1 p-2 border rounded-md",disabled:j||e}),(0,r.jsx)(p,{type:"button",onClick:k,disabled:j||e||!h,variant:"outline",size:"icon",children:e?(0,r.jsx)(n.A,{className:"h-4 w-4 animate-spin"}):(0,r.jsx)(l.A,{className:"h-4 w-4"})}),(0,r.jsx)(p,{type:"submit",disabled:j||e||!h,size:"icon",children:j?(0,r.jsx)(o.A,{className:"h-4 w-4 animate-spin"}):(0,r.jsx)(o.A,{className:"h-4 w-4"})})]})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[6,441,517,358],()=>t(1512)),_N_E=e.O()}]);