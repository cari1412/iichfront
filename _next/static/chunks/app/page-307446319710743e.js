(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1512:(e,t,s)=>{Promise.resolve().then(s.bind(s,7692))},7692:(e,t,s)=>{"use strict";s.d(t,{default:()=>p});var a=s(5155),r=s(2115),n=s(3271),i=s(5015),l=s(1190),o=s(7078),d=s(8283),c=s(5565),u=s(1290),h=s(1027),x=s(3463),f=s(9795);let m=(0,h.F)("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),g=r.forwardRef((e,t)=>{let{className:s,variant:r,size:n,asChild:i=!1,...l}=e,o=i?u.DX:"button";return(0,a.jsx)(o,{className:function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,f.QP)((0,x.$)(t))}(m({variant:r,size:n,className:s})),ref:t,...l})});g.displayName="Button";let b=s(2818).env.NEXT_PUBLIC_API_URL||"https://web.cari1412.online",p=()=>{let[e,t]=(0,r.useState)(!1),[s,u]=(0,r.useState)(""),[h,x]=(0,r.useState)(null),{messages:f,input:m,handleInputChange:p,handleSubmit:v,isLoading:y}=(0,n.Y_)({api:"".concat(b,"/api/chat")}),j=async()=>{if(m){t(!0);try{let e=await fetch("".concat(b,"/api/generate-image"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:m})});if(!e.ok)throw Error("Failed to generate image");let t=await e.json();u(t.imageUrl)}catch(e){x(e.message||"An error occurred")}finally{t(!1)}}};return(0,a.jsxs)("div",{className:"h-full flex flex-col",children:[(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto px-4",children:[0===f.length?(0,a.jsx)("div",{className:"flex items-center justify-center h-full text-gray-500",children:"Start a conversation or generate an image"}):(0,a.jsxs)("div",{className:"py-4 space-y-4",children:[f.map(e=>(0,a.jsx)("div",{className:"flex ".concat("assistant"===e.role?"justify-start":"justify-end"),children:(0,a.jsx)("div",{className:"max-w-[80%] p-4 rounded-2xl ".concat("assistant"===e.role?"bg-white border border-gray-200":"bg-blue-500 text-white"),children:(0,a.jsx)("p",{children:e.content})})},e.id)),s&&(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)(c.default,{src:s,alt:"Generated",width:400,height:400,className:"rounded-lg shadow-lg"})})]}),h&&(0,a.jsx)("div",{className:"m-4 p-4 bg-red-50 text-red-600 rounded-lg",children:h})]}),(0,a.jsx)("div",{className:"flex-none border-t bg-white p-4",children:(0,a.jsxs)("form",{onSubmit:v,className:"flex items-center gap-2",children:[(0,a.jsx)(g,{type:"button",variant:"ghost",size:"icon",className:"flex-none",children:(0,a.jsx)(i.A,{className:"w-5 h-5 text-gray-500"})}),(0,a.jsx)("input",{value:m,onChange:p,placeholder:"Type a message...",className:"flex-1 px-4 py-2 border rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:y||e}),(0,a.jsx)(g,{type:"button",onClick:j,disabled:!m||y||e,variant:"ghost",size:"icon",className:"flex-none",children:e?(0,a.jsx)(l.A,{className:"w-5 h-5 animate-spin text-gray-500"}):(0,a.jsx)(o.A,{className:"w-5 h-5 text-gray-500"})}),(0,a.jsx)(g,{type:"submit",disabled:!m||y,size:"icon",className:"flex-none bg-blue-500 hover:bg-blue-600 text-white rounded-full",children:y?(0,a.jsx)(d.A,{className:"w-5 h-5 animate-spin"}):(0,a.jsx)(d.A,{className:"w-5 h-5"})})]})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[12,441,517,358],()=>t(1512)),_N_E=e.O()}]);